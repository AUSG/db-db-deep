# 디비 디비 딥(DB DB Deep) 스터디 1회차

## 1강 데이터이란 - 용도와 역할

### 데이터베이스의 기본 기능

#### 데이터의 검색과 갱신

데이터베이스의 용도로써 가장 중요한 기능은 검색이다. 이는 곧 추출이라고도 하며, 원하는 데이터를 찾는 것이 데이터베이스의 용도로 가장 중요하다.

또한 새로운 데이터를 등록하고 기존 데이터를 수정하며 불필요해진 데이터를 제거하는 것도 가능해야 한다. 이때 등록, 수정, 제거를 일컬어 갱신이라 부른다.

데이터베이스를 조작할 때 중요한 것은 데이터를 어떤 형식(Format)으로 관리해야 검색이나 갱신에서 효율적인가 등에 대한 문제이다. 예를 들어 `이태현` 이라는 이름의 인물이 데이터베이스에 2명 존재할 경우 이름이 동일한 다른 인물이란 것을 데이터베이스 또한 알수 있게 해야한다. 이러한 원칙을 고유성(Uniqueness)이라 하며, 데이터베이스에서 데이터를 관리할 때 기초적인 규칙 중 하나이다.

마지막으로 갱신 등을 통해 데이터베이스 내 데이터의 양은 계속해서 증가할 수밖에 없기 때문에 검색 성능을 어떻게 향샹할 것인지 고민하는 건 늘 중요하다.

#### 동시성 제어

데이터베이스는 동시에 복수의 사용자로부터 검색이나 갱신 처리를 받기 때문에 갱신의 무결성을 어느 정도로 보장할지 고민해야 한다. 이는 다른 말로 동시성 제어 또는 배타 제어라고 한다.

다시 말해 복수의 사용자가 동시에 데이터베이스를 공유하고 이용하려 하는데 같은 데이터를 갱신하는 상황에 대한 제어가 필요한 것이다. 이때 사용자의 행위를 제한하는 수준에 따라 트레이드 오프가 발생하기 마련이다.

예를 들어, 동시에 두 명의 사람이 하나의 파일에 접근한다고 가정했을 때 두 명 모두 동시에 파일을 여는 것이 가능하고 나중에 수행된 갱신 행위가 반영되는 처리 방법을 더티 쓰기(Dirty Write)라 한다. 그러나 이것은 일반적으로 데이터 무결성 관점에서 기피하는 방법이다.

#### 장애 대응

데이터베이스는 중요한 정보를 모으는 시스템의 심장과도 같은 역할이기 때문에 데이터 보호와 장애 대책에 예민해야 한다.

데이터 소실을 막는 대표적인 방법으로는 크게 데이터 다중화와 백업이 있다. 데이터 다중화란 데이터를 한 곳이 아니라 복수의 장소에 분산해서 유지하는 것으로 예방책에 해당한다. 백업이란 데이터 소실이 발생했을 때 데이터를 복원하는 방법으로 사후대책이라 할 수 있다.

#### 보안

데이터베이스에 요구되는 기본 기능 중 보안도 존재한다.

먼저 사용자는 서버를 의식할 필요 없이 보통 그들과 가까운 기술은 클라이언트 기술 중심이다. 따라서 사용자가 시스템을 사용할 때 직접 조작하게 되는 건 클라이언트와 그 위에서 작동하는 프로그램 뿐이며 서버에 배치된 데이터베이스 등의 소프트웨어를 직접 조작할 일은 없다. 만약 이게 가능할 경우 시스템의 결함이다.

다음으로 데이터베이스 내에 존재하는 데이터의 기밀성이 높기 때문에 정보 유출의 위에 항상 조심해야 한다. 따라서 사용자가 데이터베이스에 접근할 수 없도록, 더 나아가 사용자가 데이터베이스의 존재조차 의식하지 않는 게 좋다.

### 데이터베이스의 종류

#### 계층형 데이터베이스

데이터를 계층 구조로 관리하는 데이터베이스다.

#### 관계형 데이터베이스

2차원 표 형식으로 데이터를 관리하는 데이터베이스로, 현재 가장 주류를 이루고 있다.

#### 객체지향 데이터베이스와 XML 데이터베이스

각각 '객체'와 'XML'이라는 형식으로 데이터를 관리하는 데이터베이스다.

#### NoSQL 데이터베이스

관계형 데이터베이스에 있는 일부 기능을 포기하는 대신 높은 처리 속도, 다시 말해 성능을 가진다. 대량의 데이터를 고속으로 처리해야 하는 웹 서비스와 잘 맞아서 최근 자주 이용되고 있다.

## 2강 관계형 데이베스란 - 가장 대표적인 데이터베이스

### 관계형 데이터베이스란

#### 관계형 데이터베이스란 무엇인가

관계형 데이터베이스(Relational Database, RDB)는 쉽게 데이터를 2차원 표를 사용해 관리하는 데이터베이스를 의미한다. 이때 관계(Relational)는 2차원 표를 표기할 때 사용하는 단어다.

#### 관계형 데이터베이스의 이점

관계형 데이터베이스는 프로그래밍 언어를 사용하지 않아도 데이터를 조작할 수 있다는 것이다. 그리고 이는 곧 SQL이라는 관계형 데이터베이스를 다루는 언어를 통해 가능하다.

### SQL 기초 지식

#### SQL이란

SQL(Structured Query Language)이란 관계형 데이터베이스가 데이터를 조작하기 위해 준비한 언어다. 여러 관계형 데이터베이스는 공통으로 SQL을 사용 중에 있다.

#### 테이블, 행, 혈의 의미

관계형 데이터베이스에 2차원 표는 테이블(Table)로 불린다. 테이블은 관계형 데이터베이스에서 데이터를 관리하기 위한 유일한 단위이기 때문에 어떤 테이블에 어떤 데이터를 포함하는지 결정하는 건 시스템의 기능을 좌우하는 중요한 의미가 된다.

테이블은 또한 2차원 축이 있기 때문에 일반적인 2차원 표와 마찬가지로 열(Column)과 행(Row)이 존재한다.

### 관계형 데이터베이스를 다루기 위한 사전 지식

#### DBMS와 데이터베이스의 차이

데이터베이스의 기능을 제공하는 소프트웨어를 데이터베이스 관리 시스템(Database  Management System, DBMS)이라고 부른다. 이때 관계형 데이터베이스에 한정하는 것을 강조하고 싶은 경우 단어 앞에 관계(Relational)를 붙여 관계형 데이터베이스 관리 시스템(Relational Database Management System, RDBMS)라 부르기도 한다.

데이터베이스와 이러한 DBMS를 구분하지 않고 사용하는 경우가 많지만 실제로 데이터베이스는 기능이나 구조를 나타내는 추상적인 개념이며 DBMS는 이 추상적인 개념을 표현한 구체적인 소프트웨어를 의미한다. 결국 MySQL 같은 소프트웨어는 DBMS이지만 데이터베이스는 아니다.

#### 소프트웨어와 데이터베이스의 관계

시스템은 단순히 데이터베이스만으로 구축할 수 없으며 다른 여러 가지 소프트웨어와 조합해서 만들어야 한다. 그리고 이러한 작업을 시스템 통합(System Integration, SI)이라 한다.

소프트웨어는 크게 운영체제, 미들웨어, 애플리케이션으로 구분할 수 있는데 각각의 소프트웨어는 계층성이 있으며 한 계층(Layer)의 소프트웨어가 작동하지 않으면 상위 계층의 소프트웨어 또한 작동하지 않는 의존성을 가지고 있다. 이때 DMBS는 미들웨어 계층에 위치하여 애플리케이션 계층과 운영체체 계층을 이어주는 역할을 한다.

운영체제(Operating System, OS)란 시스템을 작동하게 하기 위한 일종의 토대가 되는 기능을 제공하는 소프트웨어다. 대표적으로 Windows, Linux, Unix 등이 있다.

미들웨어(Middleware)는 단어 그대로 중간을 의미하는, 중간 소프트웨어로 앞서 이야기한 것처럼 데이터베이스는 여기에 속한다. 따라서 데이터베이스는 운영체제에 설치되어 작동된다.

이때 운영체제의 종류와 DMBS의 종류는 서로 여러 조합이 가능한데 운영체제나 DBMS가 기능에 대한 표준 규칙을 따르고 있고 어느 정도의 이식성이 있기 때문이다. 그래서 하나의 조합에서 다른 조합으로 시스템을 변경할 수도 있는데 이를 마이그레이션(Migration)이라 한다. 물론 SQL Server의 경우 Windows 운영체제 위에서만 작동하기 때문에 조합에 한계가 있을 수 있다.

마지막으로 애플리케이션(Application)이란 업무용 기능을 가진 프로그램된 소프트웨어로, 사용자가 가장 빈번하게 조작하는 소프트웨어다. 여러 업무에서 기존 인력에 의해 운영되던 처리, 다시 말해 비즈니스 로직 또는 비즈니스 룰을 프로그램으로 자동화하여 효율성을 높이고 비용을 줄일 수 있게 된다. 애플리케이션은 주로 Java 등과 같은 프로그래밍 언어를 사용하여 직접 제작하는 스크래치(Scratch) 방법과 다른 상용 애플리케이션 소프트웨어, 다시 말해 패키지(Package)를 사는 방법이 있다.

#### 애플리케이션과 데이터베이스의 관계

애플리케이션과 데이터베이스의 관계에서는 애플리케이션이 사용자와 데이터베이스 사이를 비집고 들어가 있다는 것이 중요하다. 결국 사용자가 데이터베이스를 직접 조학하는 것이 아닌 애플리케이션을 매개로 하여 데이터베이스에 접근하게 된다.

이는 앞서 이야기한 보안은 물론 업무 로직을 애플리케이션에 집중시켜 개발이나 수정에 걸리는 비용을 낮출 수 있는 이점이 있기 때문이다.

## 3강 데이터베이스에 얽힌 돈 이야기 - 초기비용과 운용비용

### 데이터베이스의 초기비용

#### 시스템의 전체비용 내역

시스템 전체를 볼 때 중요하게 여겨지는 비용 분류는 초기비용과 운영비용이다. 초기비용은 쉽게 최초에 지급하는 돈을 의미하며, 운영비용은 서비스를 이용하는 기간에 계속해서 지급하는 돈을 의미한다.

시스템 개발에서 초기비용으로써 대표적인 것은 서버나 네트워크 기기와 같은 하드웨어 구매비용이나 프로그램 개발을 위해 엔지니어나 프로그래머에게 지급하는 급여가 있다. 운영비용의 경우 시스템 가동 후 장애 대응이나 프로그램 수정과 같은 유지보수 비용이 포함된다.

#### 데이터베이스의 초기비용

데이터베이스를 도입할 때의 초기비용은 소프트웨어 라이선스(License) 요금이다. 라이선스 요금이란 다시 말해 소프트웨어 사용허가료다.

라이선스 요금의 경우 물리적인 단위가 아닌 논리적인 단위로 판매가 되며 판매 단위가 크게 두 가지로 나뉘는데, 프로세서 라이선스(Processor License), 사용자 라이선스(User License)가 있다. 프로세서 라이선스의 경우 DBMS를 설치해서 작동하는 하드웨어의 CPU 성능에 따라 가격이 결정되며, 사용자 라이선스의 경우 DBMS를 이용하는 사용자 수에 따라 가격이 결정되는 라이선스 체계다. 결국 두 라이선스 모두 시스템의 규모를 측정하기 위한 척도다.

### 데이터베이스의 운영비용

#### 데이터베이스의 운영비용

데이터베이에서의 운영비용은 기술지원 비용을 의미한다.

#### 기술지원 수준은 매년 내려간다

제품이 배포되고 한동안은 제품을 널리 보급하기 위해 벤더에서 다양한 기술지원을 제공하지만 점차 서비스 레벨이 낮아지다가 최후에는 신규 버그에 대한 패치를 제공하지 않으며 기술지원을 종료한다. 이 타이밍을 EOSL(End Of Service Life)이라 부른다.

#### 구매 시기와 기술지원 시기는 관계없음

이런 소프트웨어의 수명이라는 것은 사용자가 라이선스를 지급하고 구매한 날이 아니고 어디까지나 소프트웨어가 세상에 배포(Release)된 날을 기준으로 산정한다.

### 초기비용과 운영비용의 조합


#### 오픈소스를 이용한다

초기비용은 없지만 운영비용은 있는 예시는 오픈소스 소프트웨어(Open Source Software, OSS)를 이용하는 것이다. 라이선스 비용은 무료이지만 보통 기술지원 비용을 유상으로 하여 판매하곤 한다.

#### 임대 모델

최근에는 데이터베이스 또한 AWS(Amazon Web Services) 등의 클라우드 서비스에서 제공되어 시험 삼아 사용해보고 싶은 라이트 사용자에게 선택 폭이 넓어지고 있다. 최근 기업들이 고정자산을 줄이고 임대로 해결하려는 '소유하지 않는 경영'을 주목하고 있는데, 소프트웨어 또한 이러한 요구에 따라 임대 모델이 등장한 것이다. 이때 미들웨어까지 포함한 클라우드 서비스의 임대 모델을 PaaS(Platform as a Service)라고 한다.

## 4강 데이터베이스와 아키텍처 구성 - 견고하고 고속희 시스템을 구축하기 위해

### 아키텍처란

#### 아키텍처 설계의 필요성

아키텍처(Architecture)란 말은 다양한 의미가 있지만, 시스템을 만들기 위한 물리 레벨의 조합이란 의미를 가지고 있다. 구체적으로 어떤 기능을 가진 서버를 준비하고, 어떠한 저장소나 네트워크 기기와 조합해서 시스템 전체를 만들 것인지 하드웨어와 미들웨어의 구성을 설계하고 신경쓰는 것을 의미한다. 그리고 이때의 구성을 시스템이 완수해야 할 목적과 비교하면서 결정하는 것을 아키텍처 설계라 한다.
